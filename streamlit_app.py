import streamlit as st
import pandas as pd


arrays = [["24 мая (пт)", "24 мая (пт)", "24 мая (пт)", "24 мая (пт)",
           "25 мая (сб)", "25 мая (сб)", "25 мая (сб)", "25 мая (сб)", "25 мая (сб)", "25 мая (сб)", "25 мая (сб)",
           "26 мая (вс)", "26 мая (вс)", "26 мая (вс)", "26 мая (вс)", "26 мая (вс)", "26 мая (вс)", "26 мая (вс)", 
           "27 мая (пн)", "27 мая (пн)", "27 мая (пн)", "27 мая (пн)", 
           "28 мая (вт)", "28 мая (вт)", "28 мая (вт)", "28 мая (вт)", 
           "29 мая (ср)", "29 мая (ср)", "29 мая (ср)", "29 мая (ср)", 
           "30 мая (чт)", "30 мая (чт)", "30 мая (чт)", "30 мая (чт)", 
           "31 мая (пт)", "31 мая (пт)", "31 мая (пт)", "31 мая (пт)", 
           "01 июня (сб)", "01 июня (сб)", "01 июня (сб)", "01 июня (сб)", "01 июня (сб)", "01 июня (сб)", "01 июня (сб)", 
           "02 июня (вс)", "02 июня (вс)", "02 июня (вс)", "02 июня (вс)", "02 июня (вс)", "02 июня (вс)", "02 июня (вс)", 
           "03 июня (пн)", "03 июня (пн)", "03 июня (пн)", "03 июня (пн)", 
           "04 июня (вт)", "04 июня (вт)", "04 июня (вт)", "04 июня (вт)", 
           "05 июня (ср)", "05 июня (ср)", "05 июня (ср)", "05 июня (ср)", 
           "06 июня (чт)", "06 июня (чт)", "06 июня (чт)", "06 июня (чт)", 
           "07 июня (пт)", "07 июня (пт)", "07 июня (пт)", "07 июня (пт)", 
           "08 июня (сб)", "08 июня (сб)", "08 июня (сб)", "08 июня (сб)", "08 июня (сб)", "08 июня (сб)", "08 июня (сб)", 
           "09 июня (вс)", "09 июня (вс)", "09 июня (вс)", "09 июня (вс)", "09 июня (вс)", "09 июня (вс)", "09 июня (вс)", 
          ], 
          ["16-18", "18-20", "20-22", "22-24", 
           "10-12", "12-14", "14-16", "16-18", "18-20", "20-22", "22-24",  
           "10-12", "12-14", "14-16", "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "10-12", "12-14", "14-16", "16-18", "18-20", "20-22", "22-24", 
           "10-12", "12-14", "14-16", "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "16-18", "18-20", "20-22", "22-24", 
           "10-12", "12-14", "14-16", "16-18", "18-20", "20-22", "22-24", 
           "10-12", "12-14", "14-16", "16-18", "18-20", "20-22", "22-24", 
          ]]

df = pd.DataFrame(columns=pd.MultiIndex.from_arrays(arrays, names=('Дата', 'Время')))

# Функция для отображения чекбоксов и обновления таблицы
def update_schedule(df):
    st.title("Расписание собраний")
    st.write("Выберите удобные временные интервалы:")

    with st.form(key='schedule_form'):
        selected_times = {}
        for col in df.columns:
            day, time = col
            selected_times[col] = st.checkbox(f"{day} {time}")
        
        submitted = st.form_submit_button("Отправить")

    if submitted:
        new_row = []
        for col in df.columns:
            new_row.append(1 if selected_times[col] else 0)
        
        # Добавляем новую строку в DataFrame
        df.loc[len(df)] = new_row
        
        st.success("Ваши данные были успешно обновлены!")
        
    return df

# Обновление расписания
df = update_schedule(df)

# Отображение текущего состояния таблицы
st.write("Текущее состояние таблицы:")
st.write(df)
